<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.image.Image?>

<BorderPane xmlns="http://javafx.com/javafx/11.0.1" xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.progetto.ingsw.trukscout24.Controller.HomeController"
            prefHeight="900.0" prefWidth="1400.0">

    <!-- TOP HEADER -->
    <top>
        <VBox>
            <!-- Main Header Bar -->
            <HBox alignment="CENTER_LEFT" spacing="20.0"
                  style="-fx-background-color: linear-gradient(to right, #ff6b35, #f7931e); -fx-padding: 10 20;">

                <!-- Logo Section -->
                <HBox alignment="CENTER_LEFT" spacing="10.0">
                    <Label text="ðŸš›" style="-fx-font-size: 32; -fx-text-fill: white;"/>
                    <Label text="TrukScout24" textFill="WHITE">
                        <font>
                            <Font name="System Bold" size="28.0"/>
                        </font>
                    </Label>
                </HBox>

                <!-- Search Bar (Centered) -->
                <Region HBox.hgrow="ALWAYS"/>
                <HBox alignment="CENTER" spacing="10.0" style="-fx-max-width: 400;">
                    <TextField fx:id="mainSearchField" prefWidth="350.0" prefHeight="35.0"
                               promptText="Cerca camion, marca, modello..."
                               style="-fx-font-size: 14; -fx-background-radius: 20; -fx-padding: 5 15;"/>
                    <Button fx:id="mainSearchButton" text="ðŸ”" prefHeight="35.0" prefWidth="35.0"
                            style="-fx-background-color: white; -fx-text-fill: #ff6b35; -fx-background-radius: 20; -fx-font-size: 16;"
                            onAction="#onMainSearchClick"/>
                </HBox>
                <Region HBox.hgrow="ALWAYS"/>

                <!-- User Actions (Better positioned) -->
                <HBox spacing="15.0" alignment="CENTER">
                    <Button fx:id="wishlistButton" text="â™¥ Wishlist"
                            style="-fx-background-color: rgba(255,255,255,0.2); -fx-text-fill: white; -fx-font-weight: bold; -fx-background-radius: 20; -fx-padding: 8 15;"
                            onAction="#onWishlistClick"/>
                    <Button fx:id="loginButton" text="Accedi"
                            style="-fx-background-color: white; -fx-text-fill: #ff6b35; -fx-font-weight: bold; -fx-background-radius: 20; -fx-padding: 8 20;"
                            onAction="#onLoginClick"/>
                    <Button fx:id="registerButton" text="Registrati"
                            style="-fx-background-color: transparent; -fx-text-fill: white; -fx-font-weight: bold; -fx-border-color: white; -fx-border-radius: 20; -fx-background-radius: 20; -fx-padding: 8 15;"
                            onAction="#onRegisterClick"/>
                </HBox>
            </HBox>
        </VBox>
    </top>

    <!-- MAIN CONTENT -->
    <center>
        <ScrollPane fitToWidth="true" style="-fx-background-color: #f8f9fa;">
            <VBox spacing="30.0" style="-fx-padding: 20; -fx-background-color: #f8f9fa;">

                <!-- HERO SECTION -->
                <VBox alignment="CENTER" spacing="20.0"
                      style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 40; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 15, 0, 0, 3);">

                    <!-- Hero Title -->
                    <VBox alignment="CENTER" spacing="10.0">
                        <Label text="Trova il tuo camion ideale"
                               style="-fx-font-size: 36; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Label text="Oltre 15.000 veicoli commerciali premium dai migliori marchi europei"
                               style="-fx-font-size: 18; -fx-text-fill: #7f8c8d;"/>
                    </VBox>

                    <!-- Advanced Search Toggle -->
                    <HBox alignment="CENTER">
                        <Button fx:id="advancedSearchToggle" text="ðŸ”§ Ricerca Avanzata"
                                style="-fx-background-color: transparent; -fx-text-fill: #ff6b35; -fx-font-size: 14; -fx-underline: true;"
                                onAction="#onAdvancedSearchToggle"/>
                    </HBox>

                    <!-- Advanced Search Panel (Initially Hidden) -->
                    <VBox fx:id="advancedSearchPanel" spacing="20.0" maxWidth="1000.0" visible="false" managed="false">
                        <HBox spacing="15.0" alignment="CENTER">
                            <ComboBox fx:id="brandFilterCombo" prefWidth="150.0" promptText="Marca" style="-fx-font-size: 12;"/>
                            <ComboBox fx:id="priceRangeCombo" prefWidth="150.0" promptText="Fascia prezzo" style="-fx-font-size: 12;"/>
                            <ComboBox fx:id="yearRangeCombo" prefWidth="150.0" promptText="Anno" style="-fx-font-size: 12;"/>
                            <ComboBox fx:id="locationCombo" prefWidth="150.0" promptText="LocalitÃ " style="-fx-font-size: 12;"/>
                            <Button text="Applica" style="-fx-background-color: #ff6b35; -fx-text-fill: white; -fx-background-radius: 15;"
                                    onAction="#onApplyFilters"/>
                        </HBox>
                    </VBox>
                </VBox>

                <!-- BRAND SELECTION SECTION WITH LOGOS -->
                <VBox spacing="20.0" alignment="CENTER">
                    <Label text="Marchi Premium Europei"
                           style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

                    <!-- Brand Buttons Row with Static Icons and Clickable Names -->
                    <VBox spacing="15.0" alignment="CENTER">
                        <!-- First Row -->
                        <HBox spacing="25.0" alignment="CENTER">
                            <VBox spacing="5.0" alignment="CENTER">
                                <Label text="ðŸ”·" style="-fx-font-size: 32; -fx-text-fill: #003057;"/> <!-- Volvo Symbol -->
                                <Button fx:id="volvoButton" text="VOLVO" prefWidth="120.0" prefHeight="35.0"
                                        style="-fx-background-color: #003057; -fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: bold; -fx-background-radius: 8;"
                                        onAction="#onBrandClick"/>
                            </VBox>
                            <VBox spacing="5.0" alignment="CENTER">
                                <Label text="â­" style="-fx-font-size: 32; -fx-text-fill: #000000;"/> <!-- Mercedes Symbol -->
                                <Button fx:id="mercedesButton" text="Mercedes-Benz" prefWidth="120.0" prefHeight="35.0"
                                        style="-fx-background-color: #000000; -fx-text-fill: white; -fx-font-size: 12; -fx-font-weight: bold; -fx-background-radius: 8;"
                                        onAction="#onBrandClick"/>
                            </VBox>
                            <VBox spacing="5.0" alignment="CENTER">
                                <Label text="ðŸ¦" style="-fx-font-size: 32; -fx-text-fill: #e30613;"/> <!-- MAN Symbol -->
                                <Button fx:id="manButton" text="MAN" prefWidth="120.0" prefHeight="35.0"
                                        style="-fx-background-color: #e30613; -fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: bold; -fx-background-radius: 8;"
                                        onAction="#onBrandClick"/>
                            </VBox>
                            <VBox spacing="5.0" alignment="CENTER">
                                <Label text="ðŸ”µ" style="-fx-font-size: 32; -fx-text-fill: #1c5aa0;"/> <!-- Scania Symbol -->
                                <Button fx:id="scaniaButton" text="SCANIA" prefWidth="120.0" prefHeight="35.0"
                                        style="-fx-background-color: #1c5aa0; -fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: bold; -fx-background-radius: 8;"
                                        onAction="#onBrandClick"/>
                            </VBox>
                        </HBox>

                        <!-- Second Row -->
                        <HBox spacing="25.0" alignment="CENTER">
                            <VBox spacing="5.0" alignment="CENTER">
                                <Label text="ðŸ”º" style="-fx-font-size: 32; -fx-text-fill: #003d7a;"/> <!-- Iveco Symbol -->
                                <Button fx:id="ivecoButton" text="IVECO" prefWidth="120.0" prefHeight="35.0"
                                        style="-fx-background-color: #003d7a; -fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: bold; -fx-background-radius: 8;"
                                        onAction="#onBrandClick"/>
                            </VBox>
                            <VBox spacing="5.0" alignment="CENTER">
                                <Label text="ðŸ’Ž" style="-fx-font-size: 32; -fx-text-fill: #ffcc00;"/> <!-- Renault Symbol -->
                                <Button fx:id="renaultButton" text="RENAULT" prefWidth="120.0" prefHeight="35.0"
                                        style="-fx-background-color: #ffcc00; -fx-text-fill: black; -fx-font-size: 12; -fx-font-weight: bold; -fx-background-radius: 8;"
                                        onAction="#onBrandClick"/>
                            </VBox>
                            <VBox spacing="5.0" alignment="CENTER">
                                <Label text="ðŸ”¶" style="-fx-font-size: 32; -fx-text-fill: #0066cc;"/> <!-- DAF Symbol -->
                                <Button fx:id="dafButton" text="DAF" prefWidth="120.0" prefHeight="35.0"
                                        style="-fx-background-color: #0066cc; -fx-text-fill: white; -fx-font-size: 14; -fx-font-weight: bold; -fx-background-radius: 8;"
                                        onAction="#onBrandClick"/>
                            </VBox>
                        </HBox>
                    </VBox>
                </VBox>

                <!-- FEATURED TRUCKS SECTION -->
                <VBox spacing="20.0">
                    <!-- Section Header -->
                    <HBox alignment="CENTER_LEFT" spacing="20.0">
                        <Label fx:id="featuredLabel" text="Camion in Evidenza"
                               style="-fx-font-size: 24; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                        <Region HBox.hgrow="ALWAYS"/>
                        <ComboBox fx:id="sortCombo" prefWidth="200.0" promptText="Ordina per"
                                  style="-fx-font-size: 14;" onAction="#onSortChange"/>
                        <Label fx:id="countLabel" text="(0 veicoli)"
                               style="-fx-font-size: 14; -fx-text-fill: #7f8c8d;"/>
                    </HBox>

                    <!-- Trucks Grid (2x3 Layout with Bigger Cards) -->
                    <GridPane fx:id="trucksGrid" hgap="20.0" vgap="20.0" alignment="CENTER">
                        <columnConstraints>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="450.0" prefWidth="500.0"/>
                            <ColumnConstraints hgrow="SOMETIMES" minWidth="450.0" prefWidth="500.0"/>
                        </columnConstraints>
                        <rowConstraints>
                            <RowConstraints minHeight="350.0" prefHeight="380.0" vgrow="SOMETIMES"/>
                            <RowConstraints minHeight="350.0" prefHeight="380.0" vgrow="SOMETIMES"/>
                            <RowConstraints minHeight="350.0" prefHeight="380.0" vgrow="SOMETIMES"/>
                        </rowConstraints>

                        <!-- Truck Cards will be populated programmatically -->
                    </GridPane>

                    <!-- View More Button -->
                    <HBox alignment="CENTER">
                        <Button fx:id="viewMoreButton" text="Visualizza Altri Camion" prefWidth="250.0" prefHeight="45.0"
                                style="-fx-background-color: transparent; -fx-text-fill: #ff6b35; -fx-font-size: 16; -fx-font-weight: bold; -fx-border-color: #ff6b35; -fx-border-radius: 25; -fx-background-radius: 25;"
                                onAction="#onViewMoreClick"/>
                    </HBox>
                </VBox>

                <!-- SERVICES SECTION (Smaller) -->
                <VBox spacing="15.0" alignment="CENTER"
                      style="-fx-background-color: white; -fx-background-radius: 15; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.1), 10, 0, 0, 2);">

                    <Label text="I Nostri Servizi"
                           style="-fx-font-size: 20; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>

                    <HBox spacing="30.0" alignment="CENTER">
                        <VBox spacing="8.0" alignment="CENTER" prefWidth="180.0">
                            <Label text="ðŸ”" style="-fx-font-size: 38;"/>
                            <Label text="Ricerca Avanzata" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                            <Label text="Trova il veicolo perfetto con i nostri filtri professionali"
                                   style="-fx-font-size: 11; -fx-text-fill: #7f8c8d; -fx-text-alignment: center;" wrapText="true"/>
                        </VBox>

                        <VBox spacing="8.0" alignment="CENTER" prefWidth="180.0">
                            <Label text="ðŸ›¡ï¸" style="-fx-font-size: 38;"/>
                            <Label text="Garanzia Premium" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                            <Label text="Tutti i veicoli certificati con garanzia estesa inclusa"
                                   style="-fx-font-size: 11; -fx-text-fill: #7f8c8d; -fx-text-alignment: center;" wrapText="true"/>
                        </VBox>

                        <VBox spacing="8.0" alignment="CENTER" prefWidth="180.0">
                            <Label text="ðŸšš" style="-fx-font-size: 38;"/>
                            <Label text="Consegna Europa" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                            <Label text="Consegna gratuita in tutta Europa per acquisti premium"
                                   style="-fx-font-size: 11; -fx-text-fill: #7f8c8d; -fx-text-alignment: center;" wrapText="true"/>
                        </VBox>

                        <VBox spacing="8.0" alignment="CENTER" prefWidth="180.0">
                            <Label text="ðŸ’°" style="-fx-font-size: 38;"/>
                            <Label text="Finanziamenti" style="-fx-font-size: 14; -fx-font-weight: bold; -fx-text-fill: #2c3e50;"/>
                            <Label text="Soluzioni di finanziamento personalizzate per aziende"
                                   style="-fx-font-size: 11; -fx-text-fill: #7f8c8d; -fx-text-alignment: center;" wrapText="true"/>
                        </VBox>
                    </HBox>
                </VBox>
            </VBox>
        </ScrollPane>
    </center>

    <!-- FOOTER (Smaller - 20px) -->
    <bottom>
        <VBox style="-fx-background-color: #2c3e50; -fx-pref-height: 20;">
            <!-- Bottom Footer Only -->
            <HBox alignment="CENTER_LEFT" spacing="20.0" style="-fx-padding: 5 20; -fx-background-color: #2c3e50;">
                <Label fx:id="statusLabel" text="TrukScout24 - La tua piattaforma per veicoli commerciali premium"
                       style="-fx-font-size: 11; -fx-text-fill: #bdc3c7;"/>
                <Region HBox.hgrow="ALWAYS"/>
                <Label text="Â© 2024 TrukScout24 S.r.l. - P.IVA: 12345678901"
                       style="-fx-font-size: 9; -fx-text-fill: #95a5a6;"/>
            </HBox>
        </VBox>
    </bottom>

</BorderPane>
