<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.animation.TranslateTransition?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.CheckBox?>
<?import javafx.scene.control.Hyperlink?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.layout.AnchorPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.util.Duration?>

<AnchorPane maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.progetto.ingsw.trukscout24.Controller.LoginController">

    <!-- MAIN CONTENT - SOLO IL FORM PICCOLO E CENTRATO -->
    <StackPane style="-fx-background-color: #f8f9fa;" AnchorPane.leftAnchor="50" AnchorPane.rightAnchor="50" AnchorPane.topAnchor="50">
        <VBox alignment="CENTER" prefHeight="350.0" prefWidth="300.0" spacing="20.0" style="-fx-background-color: white; -fx-background-radius: 10; -fx-padding: 25; -fx-effect: dropshadow(gaussian, rgba(0,0,0,0.15), 15, 0, 0, 3);">

            <!-- Logo e titolo cliccabili con animazione -->
            <VBox alignment="CENTER" spacing="5.0">
                <!-- Hyperlink per il logo con onMouseClicked e drag and drop -->
                <Label fx:id="logoLabel" style="-fx-font-size: 24;" text="🚛" onMouseClicked="#goToHome" onMousePressed="#handleMousePressed" onMouseDragged="#handleMouseDragged" />
                <Label style="-fx-font-size: 18; -fx-font-weight: bold; -fx-text-fill: #2c3e50;" text="TrukScout24" textAlignment="CENTER" />
                <Label style="-fx-font-size: 12; -fx-text-fill: #666666;" text="Accedi al tuo account" textAlignment="CENTER" />
            </VBox>

            <!-- Form di login -->
            <VBox alignment="CENTER" prefWidth="250.0" spacing="12.0">

                <!-- Campo Email -->
                <TextField fx:id="emailField" onKeyPressed="#onEnterPressed" promptText="Email" style="-fx-padding: 10;                                   -fx-border-color: #ddd;                                   -fx-border-radius: 4;                                   -fx-background-radius: 4;                                   -fx-font-size: 13;                                   -fx-background-color: white;                                   -fx-prompt-text-fill: #999;                                   -fx-text-fill: #333;">
                </TextField>

                <!-- Campo Password con toggle -->
                <StackPane>
                    <PasswordField fx:id="passwordField" onKeyPressed="#onEnterPressed" promptText="Password" style="-fx-padding: 10 35 10 10;                                           -fx-border-color: #ddd;                                           -fx-border-radius: 4;                                           -fx-background-radius: 4;                                           -fx-font-size: 13;                                           -fx-background-color: white;                                           -fx-prompt-text-fill: #999;                                           -fx-text-fill: #333;">
                    </PasswordField>

                    <TextField fx:id="passwordTextField" onKeyPressed="#onEnterPressed" promptText="Password" style="-fx-padding: 10 35 10 10;                                       -fx-border-color: #ddd;                                       -fx-border-radius: 4;                                       -fx-background-radius: 4;                                       -fx-font-size: 13;                                       -fx-background-color: white;                                       -fx-prompt-text-fill: #999;                                       -fx-text-fill: #333;" visible="false">
                    </TextField>

                    <Button fx:id="togglePasswordButton" onAction="#togglePasswordVisibility" style="-fx-background-color: transparent;                                    -fx-border-color: transparent;                                    -fx-font-size: 14;                                    -fx-cursor: hand;                                    -fx-padding: 5;" text="👁" StackPane.alignment="CENTER_RIGHT">
                        <cursor>
                            <Cursor fx:constant="HAND" />
                        </cursor>
                    </Button>
                </StackPane>

                <!-- Checkbox Remember Me -->
                <CheckBox fx:id="rememberMeCheckBox" style="-fx-text-fill: #666666; -fx-font-size: 12;" text="Ricordami">
                </CheckBox>

                <!-- Pulsante Accedi -->
                <Button alignment="CENTER" fx:id="loginButton" mnemonicParsing="false" onAction="#handleLogin" prefHeight="35.0" prefWidth="250.0" style="-fx-background-color: #ff6b35;                                -fx-background-radius: 4;                                -fx-font-size: 14;                                -fx-font-weight: bold;                                -fx-cursor: hand;                                -fx-text-fill: white;                                -fx-effect: dropshadow(gaussian, rgba(255,107,53,0.3), 3, 0, 0, 1);" text="Accedi">
                    <cursor>
                        <Cursor fx:constant="HAND" />
                    </cursor>
                </Button>

                <!-- Link password dimenticata -->
                <HBox alignment="CENTER">
                    <Hyperlink fx:id="forgotPasswordLink" onAction="#handleForgotPassword" style="-fx-font-size: 11;                                       -fx-underline: false;                                       -fx-text-fill: #ff6b35;                                       -fx-cursor: hand;" text="Password dimenticata?">
                    </Hyperlink>
                </HBox>

                <!-- Link registrazione -->
                <VBox alignment="CENTER" spacing="5.0">
                    <Label style="-fx-font-size: 11; -fx-text-fill: #666666;" text="Non hai un account?" />
                    <Hyperlink fx:id="registerLink" onAction="#handleRegister" style="-fx-font-size: 12;                                       -fx-font-weight: bold;                                       -fx-underline: false;                                       -fx-text-fill: #ff6b35;                                       -fx-cursor: hand;" text="Registrati ora">
                    </Hyperlink>
                </VBox>
            </VBox>
        </VBox>
    </StackPane>

    <!-- Label per errori -->
    <Label fx:id="errorLabel" prefWidth="300.0" style="-fx-font-size: 11;                   -fx-text-fill: #ef4444;                   -fx-background-color: rgba(239,68,68,0.1);                   -fx-background-radius: 4;                   -fx-padding: 8;" textAlignment="CENTER" visible="false" wrapText="true" StackPane.alignment="CENTER">
    </Label>

    <!-- Label per successo -->
    <Label fx:id="successLabel" prefWidth="300.0" style="-fx-font-size: 11;                   -fx-text-fill: #10b981;                   -fx-background-color: rgba(16,185,129,0.1);                   -fx-background-radius: 4;                   -fx-padding: 8;" textAlignment="CENTER" visible="false" wrapText="true" StackPane.alignment="CENTER">
    </Label>

</AnchorPane>
