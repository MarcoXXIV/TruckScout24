<?xml version="1.0" encoding="UTF-8"?>

<?import java.net.URL?>
<?import javafx.geometry.Insets?>
<?import javafx.scene.Cursor?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Hyperlink?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.PasswordField?>
<?import javafx.scene.control.ProgressIndicator?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.effect.GaussianBlur?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.text.Font?>

<StackPane prefHeight="346.0" prefWidth="150.0" styleClass="background-pane" xmlns="http://javafx.com/javafx/24.0.1" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.progetto.ingsw.trukscout24.Controller.LoginController">
    <stylesheets>
        <URL value="@../css/Login.css" />
    </stylesheets>

    <!-- Immagine di sfondo sfocata -->
    <ImageView fitHeight="346.0" fitWidth="150.0" preserveRatio="false" style="-fx-z-index: -1;">
        <effect>
            <GaussianBlur radius="50.0" />
        </effect>
        <Image url="@../Icone/SfondoLoginRegistrazione.png" />
    </ImageView>

    <!-- Contenuto principale -->
    <VBox fx:id="mainContainer" alignment="CENTER" spacing="0" VBox.vgrow="ALWAYS">
        <StackPane.margin>
            <Insets top="30" />
        </StackPane.margin>

        <!-- Form con sfondo bianco -->
        <VBox fx:id="formBox" alignment="CENTER" maxWidth="400" spacing="15" styleClass="form-box">

            <!-- Logo - FUORI dal form-box -->
            <VBox alignment="CENTER" onMouseClicked="#HomeClick" spacing="5" styleClass="logo-container">
                <Label fx:id="logoLabel" onMouseDragged="#handleMouseDragged" onMousePressed="#handleMousePressed" style="-fx-cursor: hand;">
                    <graphic>
                        <ImageView fitHeight="90.0" fitWidth="203.0" preserveRatio="true">
                            <Image url="@../Icone/TruckScout24.png" />
                        </ImageView>
                    </graphic>
                </Label>
            </VBox>

            <!-- Form fields -->
            <VBox alignment="CENTER" maxWidth="300" spacing="12" styleClass="form-fields">

                <TextField fx:id="emailField" promptText="Email" styleClass="text-field" />

                <StackPane>
                    <PasswordField fx:id="passwordField" promptText="Password" styleClass="password-field" />
                    <TextField fx:id="passwordTextField" promptText="Password" styleClass="password-field" visible="false" />
                    <Button fx:id="togglePasswordButton" onAction="#togglePasswordVisibility" styleClass="password-button" text="👁" StackPane.alignment="CENTER_RIGHT">
                  <font>
                     <Font size="14.0" />
                  </font></Button>
                </StackPane>

                <Button fx:id="loginButton" maxWidth="100.0" onAction="#handleLogin" prefHeight="40.0" styleClass="button" text="Accedi">
                    <cursor>
                        <Cursor fx:constant="HAND" />
                    </cursor>
               <font>
                  <Font size="14.0" />
               </font>
               <VBox.margin>
                  <Insets top="10.0" />
               </VBox.margin>
                </Button>

                <!-- Loading indicator -->
                <ProgressIndicator fx:id="loadingIndicator" maxHeight="30" maxWidth="30" visible="false" />

                <Hyperlink fx:id="forgotPasswordLink" onMouseClicked="#PasswordDimenticataClick" styleClass="hyperlink" text="Password dimenticata?">
               <font>
                  <Font size="14.0" />
               </font></Hyperlink>
   
               <!-- Link registrazione - FUORI dal form-box -->
               <VBox alignment="CENTER" spacing="8" styleClass="register-section">
                   <VBox.margin>
                       <Insets top="15" />
                   </VBox.margin>
                   <Label styleClass="label-small" text="Non hai un account?">
                  <font>
                     <Font size="14.0" />
                  </font>
               </Label>
                   <Hyperlink fx:id="registerLink" onMouseClicked="#RegistrazioneClick" styleClass="hyperlink" text="Registrati ora">
                  <font>
                     <Font size="14.0" />
                  </font>
               </Hyperlink>
               </VBox>

            </VBox>

            <!-- Label di errore e successo -->
            <Label fx:id="errorLabel" maxWidth="300" styleClass="error-label" textAlignment="CENTER" visible="false" wrapText="true" />

            <Label fx:id="successLabel" maxWidth="300" styleClass="success-label" textAlignment="CENTER" visible="false" wrapText="true" />

        </VBox>
    </VBox>
</StackPane>
